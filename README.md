# EdgeTrace

**Automated Call Graph Comparison for GraalVM Native Image**

Web tool for comparing and querying call graphs from [GraalVM Native Image](https://www.graalvm.org/latest/reference-manual/native-image/) compilations.

Bachelor's thesis, Faculty of Information Technology, Brno University of Technology, 2025.

## Installation

1. Install [Docker](https://docs.docker.com/engine/install/) and [Docker Compose](https://docs.docker.com/compose/install/).

2. Clone the repository.

3. Copy the example environment file and populate the environment variables:
   ```sh
   cp .env.example .env
   nano .env
   ```

4. Build and run the project:
   ```sh
   docker compose -f compose.yaml -f compose.override.yaml up
   ```

5. The app is now running and available at http://localhost:3000.
   - Backend: http://localhost:3001
   - Neo4j Browser: http://localhost:7474

> [!TIP]
> Compose files can be specified in `.env` instead: `COMPOSE_FILE=compose.yaml:compose.override.yaml`

## Usage

1. Navigate to the _Manage_ page and import call graphs from GraalVM Native Image report directories.

   The CSV report files can be generated by using the `-H:+PrintAnalysisCallTree` and `-H:PrintAnalysisCallTreeType=CSV` options during Native Image compilations.
   Nodes and edges of the imported call graph are saved into the Neo4j graph database.

2. The imported call graphs can now be opened from the management page or from the navigation bar.

   To search for specific methods of the call graph, use the method tree in the left side panel.
   Clicking a method opens a new view and shows the method with a path from the nearest entry point.
   Use a modifier key to add the method to the current view instead.
   Up to ten views can be open at once, and they can be switched or closed at any time using the list at the bottom of the page.

   The details of any method can be shown in the bottom right panel by selecting its node inside the graph.
   To traverse the graph, you can use the lists of callers and callees to show the currently selected method's neighbors.
   All nodes have a right-click context menu that provides options to show or hide all callers or callees of the method, or hide the node itself.

   The method nodes are placed inside compound nodes, which represent the hierarchy of classes and packages.
   These parents can be collapsed by selecting them and pressing the expand/collapse button in their top left corner.
   The compound nodes can be turned off altogether by toggling the graph option in the right side panel.

4. To compute the difference between two call graphs, open the difference calculation section, select the other graph, set the maximum number of iterations, and press the _Calculate_ button.

   The call graph difference algorithm is launched, and the computation progress is shown inside the button.
   After the algorithm finishes, the 10 highest-ranked edges of the first call graph are shown in a new view.
   The number of top edges shown can be changed using the controls in the top right.
   The computed difference can be displayed at any time using the same dialog.

   The edges are colored by a color scale based on their final difference score, which can be inspected in the edge details panel after selecting an edge inside the graph.
   When no nodes or edges are selected, the graph details in the bottom right provide a list of top edges to show or hide individually.
